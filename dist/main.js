(()=>{"use strict";class e{constructor(e){this.title=e}}let t=[];new e("New Project");class n{constructor(e,t,n,l,s){this.title=e,this.dueDate=t,this.projectTitle=n,this.priority=l,this.isComplete=s}}let l=[],s=[];const a=e=>{localStorage.setItem("taskList",JSON.stringify(e))},c=e=>{localStorage.setItem("projectList",JSON.stringify(e))},o=()=>{let e=document.querySelector(".taskList"),n=0;l.filter((e=>e.projectTitle.includes(s))).forEach((t=>{let s=document.createElement("div");s.dataset.index=n,s.classList.add("task","lowPriority"),e.append(s);let c=document.createElement("div");c.classList.add("taskTitleContainer");let r=document.createElement("span");r.classList.add("material-symbols-outlined","taskCheck"),r.textContent="radio_button_unchecked";let d=document.createElement("p");d.classList.add("taskTitle"),d.textContent=t.title,c.append(r,d);let u=document.createElement("p");u.classList.add("taskDate"),u.textContent=t.dueDate;let m=document.createElement("span");m.classList.add("material-symbols-outlined","deleteTaskBtn"),m.textContent="delete",m.dataset.index=n,n++;let p=document.createElement("span");p.classList.add("material-symbols-outlined","taskEdit"),p.textContent="edit_square","high"==t.priority&&(s.classList.remove("lowPriority"),s.classList.add("highPriority")),1==t.isComplete&&(s.classList.add("completeTask"),r.classList.add("taskCheckTrue"),r.textContent="check_circle"),s.append(c,u,m),m.addEventListener("click",(function(e){e.target.classList.contains("deleteTaskBtn")&&(e.stopPropagation(),console.log(m.dataset.index),l.splice(m.dataset.index,1),e.target.closest(".task").remove(),i(),o(),a(l))})),r.addEventListener("click",(function(e){e.target.classList.contains("taskCheck")&&(0==l[m.dataset.index].isComplete?(e.stopPropagation(),e.target.classList.add("taskCheckTrue"),l[m.dataset.index].isComplete=!0,i(),o(),a(l)):(e.stopPropagation(),e.target.classList.remove("taskCheckTrue"),e.target.textContent="radio_button_unchecked",l[m.dataset.index].isComplete=!1,i(),o(),a(l)))}))}));let c=document.querySelector(".currentProjectHeader");-1!==t.map((e=>e.title)).indexOf(s)?c.textContent=s:c.textContent=""},i=()=>{document.querySelector(".taskList").innerHTML=""},r=()=>{let e=document.querySelector(".projectList"),n=0;t.forEach((s=>{let u=document.createElement("div");u.classList.add("project"),e.append(u),u.dataset.index=n,n++;let m=document.createElement("p");m.classList.add("taskTitle"),m.textContent=s.title;let p=document.createElement("span");p.classList.add("material-symbols-outlined","deleteProjectBtn"),p.textContent="delete",u.append(m,p),p.addEventListener("click",(function(e){const n=e.target.previousElementSibling.textContent.toString();if(e.target.classList.contains("deleteProjectBtn")){function s(e,t){for(let n=t.length-1;n>=0;n--)t[n].projectTitle===e&&t.splice(n,1)}e.stopPropagation(),console.log(u.dataset.index),t.splice(u.dataset.index,1),console.log(n),e.target.closest(".project").remove(),s(n,l),d(),r(),i(),o(),c(t),a(l)}}))})),document.querySelector(".menuBtn").addEventListener("click",(()=>{let e=document.querySelector(".sidebar"),t=document.querySelector(".listContainer");e.classList.contains("collapsed")?(e.style.width="300px",e.style.zIndex="1",t.style.marginLeft="300px",e.classList.remove("collapsed")):(e.style.width="0",e.style.zIndex="-1",t.style.marginLeft="0",e.classList.add("collapsed"))}))},d=()=>{document.querySelector(".projectList").innerHTML=""};document.addEventListener("click",(function(e){if(e.target.classList.contains("project")){let t=e.target.querySelector(".taskTitle").textContent;s=t,i(),o(l)}})),t=null===localStorage.getItem("projectList")?[]:JSON.parse(localStorage.getItem("projectList")),l=null===localStorage.getItem("taskList")?[]:JSON.parse(localStorage.getItem("taskList")),s=null===localStorage.getItem("currentProject")?"":JSON.parse(localStorage.getItem("currentProject")),o(),r(),(()=>{let e=document.querySelector(".newTaskBtn"),c=document.querySelector(".newTaskContainer");e.addEventListener("click",(function(){0===t.length?alert("Please create a project first!"):null===s?alert("Please create or select an existing project!"):(c.style.display="flex",e.style.display="none")}));let r=document.querySelector(".confirmTaskBtn"),d=document.querySelector(".cancelTaskBtn");r.addEventListener("click",(function(){let t=document.querySelector("#taskName").value,r=document.querySelector("#taskDate").value,d=document.querySelector("#prioritySelector").value,u=new n(t,r,s,d,!1);l.push(u),i(),o(l),document.querySelectorAll("#taskName, #taskDate, #prioritySelector").forEach((e=>{e.value=""})),c.style.display="none",e.style.display="inline",a(l)})),d.addEventListener("click",(function(){c.style.display="none",e.style.display="inline"}))})(),(()=>{let n=document.querySelector(".newProjectBtn"),l=document.querySelector(".newProjectContainer");n.addEventListener("click",(function(){l.style.display="flex",n.style.display="none"}));let a=document.querySelector(".confirmProjectBtn"),u=document.querySelector(".cancelProjectBtn");a.addEventListener("click",(function(){let a=document.querySelector("#projectName").value,u=new e(a);var m;t.push(u),s=a,d(),r(),i(),o(),document.querySelectorAll("#projectName").forEach((e=>{e.value=""})),l.style.display="none",n.style.display="inline",c(t),m=s,localStorage.setItem("currentProject",JSON.stringify(m))})),u.addEventListener("click",(function(){l.style.display="none",n.style.display="inline"}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFDVEMsWUFBWUMsR0FDUkMsS0FBS0QsTUFBUUEsQ0FDakIsRUFHSixJQUFJRSxFQUFjLEdBQ0csSUFBSUosRUFBUSxlQ0wxQixNQUFNSyxFQUNUSixZQUFZQyxFQUFPSSxFQUFTQyxFQUFjQyxFQUFVQyxHQUNoRE4sS0FBS0QsTUFBUUEsRUFDYkMsS0FBS0csUUFBVUEsRUFDZkgsS0FBS0ksYUFBZUEsRUFDcEJKLEtBQUtLLFNBQVdBLEVBQ2hCTCxLQUFLTSxXQUFhQSxDQUN0QixFQUdKLElBQUksRUFBVyxHQUNYQyxFQUFpQixHQ1ByQixNQUFNQyxFQUEwQkMsSUFDNUJDLGFBQWFDLFFBQVEsV0FBWUMsS0FBS0MsVUFBVUosR0FBSyxFQXNCbkRLLEVBQTZCQyxJQUMvQkwsYUFBYUMsUUFBUSxjQUFlQyxLQUFLQyxVQUFVRSxHQUFRLEVDMEJ6REMsRUFBZSxLQUNuQixJQUFJQyxFQUFvQkMsU0FBU0MsY0FBYyxhQUUzQ0MsRUFBWSxFRjNDTSxFQUFTQyxRQUFPQyxHQUFPQSxFQUFJbEIsYUFBYW1CLFNBQVNoQixLRTZDckRpQixTQUFTQyxJQUN6QixJQUFJaEIsRUFBT1MsU0FBU1EsY0FBYyxPQUNsQ2pCLEVBQUtrQixRQUFRQyxNQUFRUixFQUNyQlgsRUFBS29CLFVBQVVDLElBQUksT0FBUSxlQUMzQmIsRUFBa0JjLE9BQU90QixHQUV6QixJQUFJdUIsRUFBcUJkLFNBQVNRLGNBQWMsT0FDaERNLEVBQW1CSCxVQUFVQyxJQUFJLHNCQUVqQyxJQUFJRyxFQUFZZixTQUFTUSxjQUFjLFFBQ3ZDTyxFQUFVSixVQUFVQyxJQUFJLDRCQUE2QixhQUNyREcsRUFBVUMsWUFBYyx5QkFFeEIsSUFBSUMsRUFBWWpCLFNBQVNRLGNBQWMsS0FDdkNTLEVBQVVOLFVBQVVDLElBQUksYUFDeEJLLEVBQVVELFlBQWNULEVBQVExQixNQUVoQ2lDLEVBQW1CRCxPQUFPRSxFQUFXRSxHQUVyQyxJQUFJQyxFQUFXbEIsU0FBU1EsY0FBYyxLQUN0Q1UsRUFBU1AsVUFBVUMsSUFBSSxZQUN2Qk0sRUFBU0YsWUFBY1QsRUFBUXRCLFFBRS9CLElBQUlrQyxFQUFhbkIsU0FBU1EsY0FBYyxRQUN4Q1csRUFBV1IsVUFBVUMsSUFBSSw0QkFBNkIsaUJBQ3RETyxFQUFXSCxZQUFjLFNBQ3pCRyxFQUFXVixRQUFRQyxNQUFRUixFQUMzQkEsSUFFQSxJQUFJa0IsRUFBV3BCLFNBQVNRLGNBQWMsUUFDdENZLEVBQVNULFVBQVVDLElBQUksNEJBQTZCLFlBQ3BEUSxFQUFTSixZQUFjLGNBRUMsUUFBcEJULEVBQVFwQixXQUNWSSxFQUFLb0IsVUFBVVUsT0FBTyxlQUN0QjlCLEVBQUtvQixVQUFVQyxJQUFJLGlCQUdLLEdBQXRCTCxFQUFRbkIsYUFDVkcsRUFBS29CLFVBQVVDLElBQUksZ0JBQ25CRyxFQUFVSixVQUFVQyxJQUFJLGlCQUN4QkcsRUFBVUMsWUFBYyxnQkFHMUJ6QixFQUFLc0IsT0FBT0MsRUFBb0JJLEVBQVVDLEdBRTFDQSxFQUFXRyxpQkFBaUIsU0FBUyxTQUFVQyxHQUN6Q0EsRUFBTUMsT0FBT2IsVUFBVWMsU0FBUyxtQkFDbENGLEVBQU1HLGtCQUNOQyxRQUFRQyxJQUFJVCxFQUFXVixRQUFRQyxPQUMvQixTQUFnQlMsRUFBV1YsUUFBUUMsTUFBTyxHQUMxQ2EsRUFBTUMsT0FBT0ssUUFBUSxTQUFTUixTQUM5QlMsSUFDQWhDLElBQ0FSLEVBQXVCLEdBRTNCLElBRUF5QixFQUFVTyxpQkFBaUIsU0FBUyxTQUFVQyxHQUN4Q0EsRUFBTUMsT0FBT2IsVUFBVWMsU0FBUyxlQUNtQixHQUFqRCxFQUFTTixFQUFXVixRQUFRQyxPQUFPdEIsWUFDckNtQyxFQUFNRyxrQkFDTkgsRUFBTUMsT0FBT2IsVUFBVUMsSUFBSSxpQkFDM0IsRUFBU08sRUFBV1YsUUFBUUMsT0FBT3RCLFlBQWEsRUFDaEQwQyxJQUNBaEMsSUFDQVIsRUFBdUIsS0FFdkJpQyxFQUFNRyxrQkFDTkgsRUFBTUMsT0FBT2IsVUFBVVUsT0FBTyxpQkFDOUJFLEVBQU1DLE9BQU9SLFlBQWMseUJBQzNCLEVBQVNHLEVBQVdWLFFBQVFDLE9BQU90QixZQUFhLEVBQ2hEMEMsSUFDQWhDLElBQ0FSLEVBQXVCLElBRzdCLEdBQUUsSUFHSixJQUFJeUMsRUFBdUIvQixTQUFTQyxjQUFjLDBCQUd1QixJQUF2RWxCLEVBQVlpRCxLQUFLQyxHQUFXQSxFQUFPcEQsUUFBT3FELFFBQVE3QyxHQUVsRDBDLEVBQXFCZixZQUFjM0IsRUFFbkMwQyxFQUFxQmYsWUFBYyxFQUNyQyxFQUdJYyxFQUFnQixLQUNJOUIsU0FBU0MsY0FBYyxhQUM3QmtDLFVBQVksRUFBRSxFQTZDNUJDLEVBQWtCLEtBQ3RCLElBQUlDLEVBQXVCckMsU0FBU0MsY0FBYyxnQkFDOUNxQyxFQUFlLEVBRW5CdkQsRUFBWXVCLFNBQVNDLElBQ25CLElBQUlWLEVBQVVHLFNBQVNRLGNBQWMsT0FDckNYLEVBQVFjLFVBQVVDLElBQUksV0FDdEJ5QixFQUFxQnhCLE9BQU9oQixHQUM1QkEsRUFBUVksUUFBUUMsTUFBUTRCLEVBQ3hCQSxJQUVBLElBQUlwRCxFQUFlYyxTQUFTUSxjQUFjLEtBQzFDdEIsRUFBYXlCLFVBQVVDLElBQUksYUFDM0IxQixFQUFhOEIsWUFBY1QsRUFBUTFCLE1BRW5DLElBQUkwRCxFQUFnQnZDLFNBQVNRLGNBQWMsUUFDM0MrQixFQUFjNUIsVUFBVUMsSUFDdEIsNEJBQ0Esb0JBRUYyQixFQUFjdkIsWUFBYyxTQUU1Qm5CLEVBQVFnQixPQUFPM0IsRUFBY3FELEdBRTdCQSxFQUFjakIsaUJBQWlCLFNBQVMsU0FBVUMsR0FDaEQsTUFBTWlCLEVBQ0pqQixFQUFNQyxPQUFPaUIsdUJBQXVCekIsWUFBWTBCLFdBRWxELEdBQUluQixFQUFNQyxPQUFPYixVQUFVYyxTQUFTLG9CQUFxQixDQU12RCxTQUFTa0IsRUFBd0JDLEVBQWFDLEdBQzVDLElBQUssSUFBSUMsRUFBSUQsRUFBTUUsT0FBUyxFQUFHRCxHQUFLLEVBQUdBLElBQ2pDRCxFQUFNQyxHQUFHNUQsZUFBaUIwRCxHQUM1QkMsRUFBTUcsT0FBT0YsRUFBRyxFQUd0QixDQVhBdkIsRUFBTUcsa0JBQ05DLFFBQVFDLElBQUkvQixFQUFRWSxRQUFRQyxPQUM1QjNCLEVBQVlpRSxPQUFPbkQsRUFBUVksUUFBUUMsTUFBTyxHQUMxQ2lCLFFBQVFDLElBQUlZLEdBVVpqQixFQUFNQyxPQUFPSyxRQUFRLFlBQVlSLFNBQ2pDc0IsRUFBd0JILEVBQW1CLEdBQzNDUyxJQUNBYixJQUNBTixJQUNBaEMsSUFDQUYsRUFBMEJiLEdBQzFCTyxFQUF1QixFQUN6QixDQUNGLEdBQUUsSUFHVVUsU0FBU0MsY0FBYyxZQUU3QnFCLGlCQUFpQixTQUFTLEtBQ2hDLElBQUk0QixFQUFVbEQsU0FBU0MsY0FBYyxZQUNqQ2tELEVBQWdCbkQsU0FBU0MsY0FBYyxrQkFFdkNpRCxFQUFRdkMsVUFBVWMsU0FBUyxjQUM3QnlCLEVBQVFFLE1BQU1DLE1BQVEsUUFDdEJILEVBQVFFLE1BQU1FLE9BQVMsSUFDdkJILEVBQWNDLE1BQU1HLFdBQWEsUUFDakNMLEVBQVF2QyxVQUFVVSxPQUFPLGVBRXpCNkIsRUFBUUUsTUFBTUMsTUFBUSxJQUN0QkgsRUFBUUUsTUFBTUUsT0FBUyxLQUN2QkgsRUFBY0MsTUFBTUcsV0FBYSxJQUNqQ0wsRUFBUXZDLFVBQVVDLElBQUksYUFDeEIsR0FDRCxFQUdHcUMsRUFBbUIsS0FDSWpELFNBQVNDLGNBQWMsZ0JBQzdCa0MsVUFBWSxFQUFFLEVBR3JDbkMsU0FBU3NCLGlCQUFpQixTQUFTLFNBQVVDLEdBQzNDLEdBQUlBLEVBQU1DLE9BQU9iLFVBQVVjLFNBQVMsV0FBWSxDQUM5QyxJQUFJbUIsRUFBY3JCLEVBQU1DLE9BQU92QixjQUFjLGNBQWNlLFlBRTNEM0IsRUFBaUJ1RCxFQUNqQmQsSUFDQWhDLEVBQWEsRUFDZixDQUNGLElEM1BRZixFQUR1QyxPQUF4Q1MsYUFBYWdFLFFBQVEsZUFDTixHQUVBOUQsS0FBSytELE1BQU1qRSxhQUFhZ0UsUUFBUSxnQkF6QjlDLEVBRG9DLE9BQXJDaEUsYUFBYWdFLFFBQVEsWUFDVCxHQUVBOUQsS0FBSytELE1BQU1qRSxhQUFhZ0UsUUFBUSxhQWlDM0NuRSxFQUQwQyxPQUEzQ0csYUFBYWdFLFFBQVEsa0JBQ0gsR0FFQTlELEtBQUsrRCxNQUFNakUsYUFBYWdFLFFBQVEsbUJFekN6RDFELElBQ0FzQyxJRERxQixNQUNuQixJQUFJc0IsRUFBYTFELFNBQVNDLGNBQWMsZUFDcEMwRCxFQUFtQjNELFNBQVNDLGNBQWMscUJBRTlDeUQsRUFBV3BDLGlCQUFpQixTQUFTLFdBQ1IsSUFBdkJ2QyxFQUFZZ0UsT0FDZGEsTUFBTSxrQ0FDc0IsT0FBbkJ2RSxFQUNUdUUsTUFBTSxpREFFTkQsRUFBaUJQLE1BQU1TLFFBQVUsT0FDakNILEVBQVdOLE1BQU1TLFFBQVUsT0FFL0IsSUFFQSxJQUFJQyxFQUFpQjlELFNBQVNDLGNBQWMsbUJBQ3hDOEQsRUFBZ0IvRCxTQUFTQyxjQUFjLGtCQUUzQzZELEVBQWV4QyxpQkFBaUIsU0FBUyxXQUN2QyxJQUFJekMsRUFBUW1CLFNBQVNDLGNBQWMsYUFBYStELE1BQzVDL0UsRUFBVWUsU0FBU0MsY0FBYyxhQUFhK0QsTUFDOUM3RSxFQUFXYSxTQUFTQyxjQUFjLHFCQUFxQitELE1BSXZEQyxFQUFXLElBQUlqRixFQUFLSCxFQUFPSSxFQUhaSSxFQUdtQ0YsR0FGckMsR0FHakIsT0FBYzhFLEdBQ2RuQyxJQUNBaEMsRUFBYSxHQUVFRSxTQUFTa0UsaUJBQ3RCLDJDQUVLNUQsU0FBUzZELElBQ2RBLEVBQU1ILE1BQVEsRUFBRSxJQUdsQkwsRUFBaUJQLE1BQU1TLFFBQVUsT0FDakNILEVBQVdOLE1BQU1TLFFBQVUsU0FDM0J2RSxFQUF1QixFQUN6QixJQUVBeUUsRUFBY3pDLGlCQUFpQixTQUFTLFdBQ3RDcUMsRUFBaUJQLE1BQU1TLFFBQVUsT0FDakNILEVBQVdOLE1BQU1TLFFBQVUsUUFDN0IsR0FBRSxFQzNDSk8sR0RtSndCLE1BQ3RCLElBQUlDLEVBQWdCckUsU0FBU0MsY0FBYyxrQkFDdkNxRSxFQUFzQnRFLFNBQVNDLGNBQWMsd0JBRWpEb0UsRUFBYy9DLGlCQUFpQixTQUFTLFdBQ3RDZ0QsRUFBb0JsQixNQUFNUyxRQUFVLE9BQ3BDUSxFQUFjakIsTUFBTVMsUUFBVSxNQUNoQyxJQUVBLElBQUlVLEVBQW9CdkUsU0FBU0MsY0FBYyxzQkFDM0N1RSxFQUFtQnhFLFNBQVNDLGNBQWMscUJBRTlDc0UsRUFBa0JqRCxpQkFBaUIsU0FBUyxXQUMxQyxJQUFJekMsRUFBUW1CLFNBQVNDLGNBQWMsZ0JBQWdCK0QsTUFFL0NTLEVBQWMsSUFBSTlGLEVBQVFFLEdEbklQLElBQUMrRCxFQ29JeEI3RCxFQUFZMkYsS0FBS0QsR0FDakJwRixFQUFpQlIsRUFFakJvRSxJQUNBYixJQUNBTixJQUNBaEMsSUFFZUUsU0FBU2tFLGlCQUFpQixnQkFDbEM1RCxTQUFTNkQsSUFDZEEsRUFBTUgsTUFBUSxFQUFFLElBR2xCTSxFQUFvQmxCLE1BQU1TLFFBQVUsT0FDcENRLEVBQWNqQixNQUFNUyxRQUFVLFNBRTlCakUsRUFBMEJiLEdEcEpGNkQsRUNxSkx2RCxFRHBKbkJHLGFBQWFDLFFBQVEsaUJBQWtCQyxLQUFLQyxVQUFVaUQsR0NxSnhELElBRUE0QixFQUFpQmxELGlCQUFpQixTQUFTLFdBQ3pDZ0QsRUFBb0JsQixNQUFNUyxRQUFVLE9BQ3BDUSxFQUFjakIsTUFBTVMsUUFBVSxRQUNoQyxHQUFFLEVDekxKYyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Rhc2suanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL0RPTS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gICAgY29uc3RydWN0b3IodGl0bGUpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCBwcm9qZWN0TGlzdCA9IFtdO1xyXG5sZXQgZGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdCgnTmV3IFByb2plY3QnKTtcclxuXHJcbmV4cG9ydCB7IHByb2plY3RMaXN0LCBkZWZhdWx0UHJvamVjdCB9IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkdWVEYXRlLCBwcm9qZWN0VGl0bGUsIHByaW9yaXR5LCBpc0NvbXBsZXRlKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0VGl0bGUgPSBwcm9qZWN0VGl0bGU7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IGlzQ29tcGxldGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCB0YXNrTGlzdCA9IFtdO1xyXG5sZXQgY3VycmVudFByb2plY3QgPSBbXTtcclxuXHJcbmZ1bmN0aW9uIGZpbHRlckJ5UHJvamVjdCgpIHtcclxuICAgIGxldCBmaWx0ZXJQcm9qZWN0ID0gdGFza0xpc3QuZmlsdGVyKHZhbCA9PiB2YWwucHJvamVjdFRpdGxlLmluY2x1ZGVzKGN1cnJlbnRQcm9qZWN0KSk7XHJcbiAgICByZXR1cm4gZmlsdGVyUHJvamVjdDtcclxufVxyXG5cclxuZXhwb3J0IHsgY3VycmVudFByb2plY3QsIGZpbHRlckJ5UHJvamVjdCwgdGFza0xpc3QgfSIsImltcG9ydCB7IGN1cnJlbnRQcm9qZWN0LCB0YXNrTGlzdCB9IGZyb20gXCIuL3Rhc2tcIjtcclxuaW1wb3J0IHsgcHJvamVjdExpc3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XHJcblxyXG4vLyBUYXNrcyBsb2NhbCBzdG9yYWdlXHJcblxyXG5cclxuY29uc3Qgc2F2ZVRhc2tUb0xvY2FsU3RvcmFnZSA9ICh0YXNrKSA9PiB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza0xpc3QnLCBKU09OLnN0cmluZ2lmeSh0YXNrKSlcclxufVxyXG5cclxuY29uc3QgZ2V0VGFza3MgPSAoKSA9PiB7XHJcbiAgICBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0xpc3QnKSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRhc2tMaXN0ID0gW107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRhc2tMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0xpc3QnKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGNsZWFyTG9jYWxTdG9yYWdlID0gKHRhc2spID0+IHtcclxuICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRhc2spID09PSBudWxsKSB7XHJcbiAgICAgICAgdGFza0xpc3QgPSBbXTtcclxuICAgIH0gZWxzZSB7ICBcclxuICAgICAgICB0YXNrTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tMaXN0JykpXHJcbiAgICB9XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza0xpc3QnLCBKU09OLnN0cmluZ2lmeSh0YXNrTGlzdCkpXHJcbn1cclxuXHJcbi8vUHJvamVjdCBsb2NhbCBzdG9hcmdlXHJcblxyXG5jb25zdCBzYXZlUHJvamVjdFRvTG9jYWxTdG9yYWdlID0gKHByb2plY3QpID0+IHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0TGlzdCcsIEpTT04uc3RyaW5naWZ5KHByb2plY3QpKVxyXG59XHJcblxyXG5jb25zdCBnZXRQcm9qZWN0cyA9ICgpID0+IHtcclxuICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0TGlzdCcpID09PSBudWxsKSB7XHJcbiAgICAgICAgcHJvamVjdExpc3QgPSBbXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJvamVjdExpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0TGlzdCcpKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgc2F2ZUN1cnJlbnRQcm9qZWN0ID0gKHByb2plY3ROYW1lKSA9PiB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFByb2plY3QnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TmFtZSkpXHJcbn1cclxuXHJcbmNvbnN0IGdldEN1cnJlbnRQcm9qZWN0ID0gKCkgPT4ge1xyXG4gICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0JykgPT09IG51bGwpIHtcclxuICAgICAgICBjdXJyZW50UHJvamVjdCA9ICcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjdXJyZW50UHJvamVjdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0JykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBzYXZlVGFza1RvTG9jYWxTdG9yYWdlLCBnZXRUYXNrcywgY2xlYXJMb2NhbFN0b3JhZ2UsIHNhdmVQcm9qZWN0VG9Mb2NhbFN0b3JhZ2UsIGdldFByb2plY3RzLCBzYXZlQ3VycmVudFByb2plY3QsIGdldEN1cnJlbnRQcm9qZWN0IH0iLCJpbXBvcnQgeyBQcm9qZWN0LCBwcm9qZWN0TGlzdCB9IGZyb20gXCIuL3Byb2plY3RcIjtcclxuaW1wb3J0IHsgdGFza0xpc3QsIGZpbHRlckJ5UHJvamVjdCwgVGFzaywgY3VycmVudFByb2plY3QgfSBmcm9tIFwiLi90YXNrXCI7XHJcbmltcG9ydCB7XHJcbiAgc2F2ZVRhc2tUb0xvY2FsU3RvcmFnZSxcclxuICBzYXZlQ3VycmVudFByb2plY3QsXHJcbiAgc2F2ZVByb2plY3RUb0xvY2FsU3RvcmFnZSxcclxufSBmcm9tIFwiLi9zdG9yYWdlXCI7XHJcblxyXG5jb25zdCBnZW5lcmF0ZVRhc2sgPSAoKSA9PiB7XHJcbiAgbGV0IG5ld1Rhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Rhc2tCdG5cIik7XHJcbiAgbGV0IG5ld1Rhc2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Rhc2tDb250YWluZXJcIik7XHJcblxyXG4gIG5ld1Rhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmIChwcm9qZWN0TGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgYWxlcnQoXCJQbGVhc2UgY3JlYXRlIGEgcHJvamVjdCBmaXJzdCFcIik7XHJcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRQcm9qZWN0ID09PSBudWxsKSB7XHJcbiAgICAgIGFsZXJ0KFwiUGxlYXNlIGNyZWF0ZSBvciBzZWxlY3QgYW4gZXhpc3RpbmcgcHJvamVjdCFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuZXdUYXNrQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgbmV3VGFza0J0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGxldCBjb25maXJtVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29uZmlybVRhc2tCdG5cIik7XHJcbiAgbGV0IGNhbmNlbFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbFRhc2tCdG5cIik7XHJcblxyXG4gIGNvbmZpcm1UYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tOYW1lXCIpLnZhbHVlO1xyXG4gICAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEYXRlXCIpLnZhbHVlO1xyXG4gICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmlvcml0eVNlbGVjdG9yXCIpLnZhbHVlO1xyXG4gICAgbGV0IHByb2plY3RUaXRsZSA9IGN1cnJlbnRQcm9qZWN0O1xyXG4gICAgbGV0IGlzQ29tcGxldGUgPSBmYWxzZTtcclxuXHJcbiAgICBsZXQgYWRkVGFza3MgPSBuZXcgVGFzayh0aXRsZSwgZHVlRGF0ZSwgcHJvamVjdFRpdGxlLCBwcmlvcml0eSwgaXNDb21wbGV0ZSk7XHJcbiAgICB0YXNrTGlzdC5wdXNoKGFkZFRhc2tzKTtcclxuICAgIHJlc2V0VGFza0xpc3QoKTtcclxuICAgIGRpc3BsYXlUYXNrcyh0YXNrTGlzdCk7XHJcblxyXG4gICAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgXCIjdGFza05hbWUsICN0YXNrRGF0ZSwgI3ByaW9yaXR5U2VsZWN0b3JcIlxyXG4gICAgKTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICBuZXdUYXNrQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIG5ld1Rhc2tCdG4uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XHJcbiAgICBzYXZlVGFza1RvTG9jYWxTdG9yYWdlKHRhc2tMaXN0KTtcclxuICB9KTtcclxuXHJcbiAgY2FuY2VsVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgbmV3VGFza0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBuZXdUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZVwiO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZGlzcGxheVRhc2tzID0gKCkgPT4ge1xyXG4gIGxldCB0YXNrTGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza0xpc3RcIik7XHJcblxyXG4gIGxldCB0YXNrSW5kZXggPSAwO1xyXG5cclxuICBmaWx0ZXJCeVByb2plY3QoKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICBsZXQgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB0YXNrLmRhdGFzZXQuaW5kZXggPSB0YXNrSW5kZXg7XHJcbiAgICB0YXNrLmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIsIFwibG93UHJpb3JpdHlcIik7XHJcbiAgICB0YXNrTGlzdENvbnRhaW5lci5hcHBlbmQodGFzayk7XHJcblxyXG4gICAgbGV0IHRhc2tUaXRsZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB0YXNrVGl0bGVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRhc2tUaXRsZUNvbnRhaW5lclwiKTtcclxuXHJcbiAgICBsZXQgdGFza0NoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICB0YXNrQ2hlY2suY2xhc3NMaXN0LmFkZChcIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWRcIiwgXCJ0YXNrQ2hlY2tcIik7XHJcbiAgICB0YXNrQ2hlY2sudGV4dENvbnRlbnQgPSBcInJhZGlvX2J1dHRvbl91bmNoZWNrZWRcIjtcclxuXHJcbiAgICBsZXQgdGFza1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZChcInRhc2tUaXRsZVwiKTtcclxuICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IGVsZW1lbnQudGl0bGU7XHJcblxyXG4gICAgdGFza1RpdGxlQ29udGFpbmVyLmFwcGVuZCh0YXNrQ2hlY2ssIHRhc2tUaXRsZSk7XHJcblxyXG4gICAgbGV0IHRhc2tEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICB0YXNrRGF0ZS5jbGFzc0xpc3QuYWRkKFwidGFza0RhdGVcIik7XHJcbiAgICB0YXNrRGF0ZS50ZXh0Q29udGVudCA9IGVsZW1lbnQuZHVlRGF0ZTtcclxuXHJcbiAgICBsZXQgdGFza0RlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgdGFza0RlbGV0ZS5jbGFzc0xpc3QuYWRkKFwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZFwiLCBcImRlbGV0ZVRhc2tCdG5cIik7XHJcbiAgICB0YXNrRGVsZXRlLnRleHRDb250ZW50ID0gXCJkZWxldGVcIjtcclxuICAgIHRhc2tEZWxldGUuZGF0YXNldC5pbmRleCA9IHRhc2tJbmRleDtcclxuICAgIHRhc2tJbmRleCsrO1xyXG5cclxuICAgIGxldCB0YXNrRWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgdGFza0VkaXQuY2xhc3NMaXN0LmFkZChcIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWRcIiwgXCJ0YXNrRWRpdFwiKTtcclxuICAgIHRhc2tFZGl0LnRleHRDb250ZW50ID0gXCJlZGl0X3NxdWFyZVwiO1xyXG5cclxuICAgIGlmIChlbGVtZW50LnByaW9yaXR5ID09IFwiaGlnaFwiKSB7XHJcbiAgICAgIHRhc2suY2xhc3NMaXN0LnJlbW92ZShcImxvd1ByaW9yaXR5XCIpO1xyXG4gICAgICB0YXNrLmNsYXNzTGlzdC5hZGQoXCJoaWdoUHJpb3JpdHlcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVsZW1lbnQuaXNDb21wbGV0ZSA9PSB0cnVlKSB7XHJcbiAgICAgIHRhc2suY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlVGFza1wiKTtcclxuICAgICAgdGFza0NoZWNrLmNsYXNzTGlzdC5hZGQoXCJ0YXNrQ2hlY2tUcnVlXCIpO1xyXG4gICAgICB0YXNrQ2hlY2sudGV4dENvbnRlbnQgPSBcImNoZWNrX2NpcmNsZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRhc2suYXBwZW5kKHRhc2tUaXRsZUNvbnRhaW5lciwgdGFza0RhdGUsIHRhc2tEZWxldGUpO1xyXG5cclxuICAgIHRhc2tEZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRlbGV0ZVRhc2tCdG5cIikpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0YXNrRGVsZXRlLmRhdGFzZXQuaW5kZXgpO1xyXG4gICAgICAgIHRhc2tMaXN0LnNwbGljZSh0YXNrRGVsZXRlLmRhdGFzZXQuaW5kZXgsIDEpO1xyXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLnRhc2tcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgcmVzZXRUYXNrTGlzdCgpO1xyXG4gICAgICAgIGRpc3BsYXlUYXNrcygpO1xyXG4gICAgICAgIHNhdmVUYXNrVG9Mb2NhbFN0b3JhZ2UodGFza0xpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0YXNrQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRhc2tDaGVja1wiKSkge1xyXG4gICAgICAgIGlmICh0YXNrTGlzdFt0YXNrRGVsZXRlLmRhdGFzZXQuaW5kZXhdLmlzQ29tcGxldGUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJ0YXNrQ2hlY2tUcnVlXCIpO1xyXG4gICAgICAgICAgdGFza0xpc3RbdGFza0RlbGV0ZS5kYXRhc2V0LmluZGV4XS5pc0NvbXBsZXRlID0gdHJ1ZTtcclxuICAgICAgICAgIHJlc2V0VGFza0xpc3QoKTtcclxuICAgICAgICAgIGRpc3BsYXlUYXNrcygpO1xyXG4gICAgICAgICAgc2F2ZVRhc2tUb0xvY2FsU3RvcmFnZSh0YXNrTGlzdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJ0YXNrQ2hlY2tUcnVlXCIpO1xyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnRleHRDb250ZW50ID0gXCJyYWRpb19idXR0b25fdW5jaGVja2VkXCI7XHJcbiAgICAgICAgICB0YXNrTGlzdFt0YXNrRGVsZXRlLmRhdGFzZXQuaW5kZXhdLmlzQ29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgICAgIHJlc2V0VGFza0xpc3QoKTtcclxuICAgICAgICAgIGRpc3BsYXlUYXNrcygpO1xyXG4gICAgICAgICAgc2F2ZVRhc2tUb0xvY2FsU3RvcmFnZSh0YXNrTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgbGV0IGN1cnJlbnRQcm9qZWN0SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50UHJvamVjdEhlYWRlclwiKTtcclxuXHJcbiAgaWYgKFxyXG4gICAgcHJvamVjdExpc3QubWFwKChvYmplY3QpID0+IG9iamVjdC50aXRsZSkuaW5kZXhPZihjdXJyZW50UHJvamVjdCkgIT09IC0xXHJcbiAgKSB7XHJcbiAgICBjdXJyZW50UHJvamVjdEhlYWRlci50ZXh0Q29udGVudCA9IGN1cnJlbnRQcm9qZWN0O1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjdXJyZW50UHJvamVjdEhlYWRlci50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVzZXRUYXNrTGlzdCA9ICgpID0+IHtcclxuICBsZXQgdGFza0xpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tMaXN0XCIpO1xyXG4gIHRhc2tMaXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbn07XHJcblxyXG5jb25zdCBnZW5lcmF0ZVByb2plY3QgPSAoKSA9PiB7XHJcbiAgbGV0IG5ld1Byb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RCdG5cIik7XHJcbiAgbGV0IG5ld1Byb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RDb250YWluZXJcIik7XHJcblxyXG4gIG5ld1Byb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIG5ld1Byb2plY3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgbmV3UHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfSk7XHJcblxyXG4gIGxldCBjb25maXJtUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29uZmlybVByb2plY3RCdG5cIik7XHJcbiAgbGV0IGNhbmNlbFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbFByb2plY3RCdG5cIik7XHJcblxyXG4gIGNvbmZpcm1Qcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3ROYW1lXCIpLnZhbHVlO1xyXG5cclxuICAgIGxldCBhZGRQcm9qZWN0cyA9IG5ldyBQcm9qZWN0KHRpdGxlKTtcclxuICAgIHByb2plY3RMaXN0LnB1c2goYWRkUHJvamVjdHMpO1xyXG4gICAgY3VycmVudFByb2plY3QgPSB0aXRsZTtcclxuXHJcbiAgICByZXNldFByb2plY3RMaXN0KCk7XHJcbiAgICBkaXNwbGF5UHJvamVjdHMoKTtcclxuICAgIHJlc2V0VGFza0xpc3QoKTtcclxuICAgIGRpc3BsYXlUYXNrcygpO1xyXG5cclxuICAgIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjcHJvamVjdE5hbWVcIik7XHJcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbmV3UHJvamVjdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBuZXdQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZVwiO1xyXG5cclxuICAgIHNhdmVQcm9qZWN0VG9Mb2NhbFN0b3JhZ2UocHJvamVjdExpc3QpO1xyXG4gICAgc2F2ZUN1cnJlbnRQcm9qZWN0KGN1cnJlbnRQcm9qZWN0KTtcclxuICB9KTtcclxuXHJcbiAgY2FuY2VsUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgbmV3UHJvamVjdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBuZXdQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZVwiO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZGlzcGxheVByb2plY3RzID0gKCkgPT4ge1xyXG4gIGxldCBwcm9qZWN0TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdExpc3RcIik7XHJcbiAgbGV0IHByb2plY3RJbmRleCA9IDA7XHJcblxyXG4gIHByb2plY3RMaXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgIGxldCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZChcInByb2plY3RcIik7XHJcbiAgICBwcm9qZWN0TGlzdENvbnRhaW5lci5hcHBlbmQocHJvamVjdCk7XHJcbiAgICBwcm9qZWN0LmRhdGFzZXQuaW5kZXggPSBwcm9qZWN0SW5kZXg7XHJcbiAgICBwcm9qZWN0SW5kZXgrKztcclxuXHJcbiAgICBsZXQgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICBwcm9qZWN0VGl0bGUuY2xhc3NMaXN0LmFkZChcInRhc2tUaXRsZVwiKTtcclxuICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IGVsZW1lbnQudGl0bGU7XHJcblxyXG4gICAgbGV0IHByb2plY3REZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIHByb2plY3REZWxldGUuY2xhc3NMaXN0LmFkZChcclxuICAgICAgXCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkXCIsXHJcbiAgICAgIFwiZGVsZXRlUHJvamVjdEJ0blwiXHJcbiAgICApO1xyXG4gICAgcHJvamVjdERlbGV0ZS50ZXh0Q29udGVudCA9IFwiZGVsZXRlXCI7XHJcblxyXG4gICAgcHJvamVjdC5hcHBlbmQocHJvamVjdFRpdGxlLCBwcm9qZWN0RGVsZXRlKTtcclxuXHJcbiAgICBwcm9qZWN0RGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgY29uc3QgcHJvamVjdE5hbWVUYXJnZXQgPVxyXG4gICAgICAgIGV2ZW50LnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50LnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRlbGV0ZVByb2plY3RCdG5cIikpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0LmRhdGFzZXQuaW5kZXgpO1xyXG4gICAgICAgIHByb2plY3RMaXN0LnNwbGljZShwcm9qZWN0LmRhdGFzZXQuaW5kZXgsIDEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3ROYW1lVGFyZ2V0KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVGFza0J5UHJvamVjdE5hbWUocHJvamVjdE5hbWUsIHRhc2tzKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gdGFza3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYgKHRhc2tzW2ldLnByb2plY3RUaXRsZSA9PT0gcHJvamVjdE5hbWUpIHtcclxuICAgICAgICAgICAgICB0YXNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLnByb2plY3RcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgcmVtb3ZlVGFza0J5UHJvamVjdE5hbWUocHJvamVjdE5hbWVUYXJnZXQsIHRhc2tMaXN0KTtcclxuICAgICAgICByZXNldFByb2plY3RMaXN0KCk7XHJcbiAgICAgICAgZGlzcGxheVByb2plY3RzKCk7XHJcbiAgICAgICAgcmVzZXRUYXNrTGlzdCgpO1xyXG4gICAgICAgIGRpc3BsYXlUYXNrcygpO1xyXG4gICAgICAgIHNhdmVQcm9qZWN0VG9Mb2NhbFN0b3JhZ2UocHJvamVjdExpc3QpO1xyXG4gICAgICAgIHNhdmVUYXNrVG9Mb2NhbFN0b3JhZ2UodGFza0xpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgbGV0IG1lbnVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudUJ0bicpO1xyXG5cclxuICBtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgbGV0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpO1xyXG4gICAgbGV0IGxpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdENvbnRhaW5lcicpO1xyXG4gIFxyXG4gICAgaWYgKHNpZGViYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzZWQnKSkge1xyXG4gICAgICBzaWRlYmFyLnN0eWxlLndpZHRoID0gJzMwMHB4JztcclxuICAgICAgc2lkZWJhci5zdHlsZS56SW5kZXggPSAnMSc7XHJcbiAgICAgIGxpc3RDb250YWluZXIuc3R5bGUubWFyZ2luTGVmdCA9ICczMDBweCc7XHJcbiAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2VkJylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNpZGViYXIuc3R5bGUud2lkdGggPSAnMCc7XHJcbiAgICAgIHNpZGViYXIuc3R5bGUuekluZGV4ID0gJy0xJztcclxuICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5tYXJnaW5MZWZ0ID0gJzAnO1xyXG4gICAgICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn07XHJcblxyXG5jb25zdCByZXNldFByb2plY3RMaXN0ID0gKCkgPT4ge1xyXG4gIGxldCBwcm9qZWN0TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdExpc3RcIik7XHJcbiAgcHJvamVjdExpc3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInByb2plY3RcIikpIHtcclxuICAgIGxldCBwcm9qZWN0TmFtZSA9IGV2ZW50LnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tUaXRsZVwiKS50ZXh0Q29udGVudDtcclxuXHJcbiAgICBjdXJyZW50UHJvamVjdCA9IHByb2plY3ROYW1lO1xyXG4gICAgcmVzZXRUYXNrTGlzdCgpO1xyXG4gICAgZGlzcGxheVRhc2tzKHRhc2tMaXN0KTtcclxuICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IHsgZ2VuZXJhdGVUYXNrLCBnZW5lcmF0ZVByb2plY3QsIGRpc3BsYXlUYXNrcywgZGlzcGxheVByb2plY3RzIH07XHJcbiIsImltcG9ydCB7IFRhc2sgfSBmcm9tICcuL3Rhc2snXHJcbmltcG9ydCB7IGRpc3BsYXlUYXNrcywgZGlzcGxheVByb2plY3RzLCBnZW5lcmF0ZVByb2plY3QsIGdlbmVyYXRlVGFzayB9IGZyb20gJy4vRE9NJ1xyXG5pbXBvcnQgeyBwcm9qZWN0TGlzdCwgZGVmYXVsdFByb2plY3QgfSBmcm9tICcuL3Byb2plY3QnO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50UHJvamVjdCwgZ2V0UHJvamVjdHMsIGdldFRhc2tzIH0gZnJvbSAnLi9zdG9yYWdlJztcclxuXHJcbmdldFByb2plY3RzKCk7XHJcbmdldFRhc2tzKCk7XHJcbmdldEN1cnJlbnRQcm9qZWN0KCk7XHJcbmRpc3BsYXlUYXNrcygpO1xyXG5kaXNwbGF5UHJvamVjdHMoKTtcclxuZ2VuZXJhdGVUYXNrKCk7XHJcbmdlbmVyYXRlUHJvamVjdCgpOyJdLCJuYW1lcyI6WyJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsInRoaXMiLCJwcm9qZWN0TGlzdCIsIlRhc2siLCJkdWVEYXRlIiwicHJvamVjdFRpdGxlIiwicHJpb3JpdHkiLCJpc0NvbXBsZXRlIiwiY3VycmVudFByb2plY3QiLCJzYXZlVGFza1RvTG9jYWxTdG9yYWdlIiwidGFzayIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5Iiwic2F2ZVByb2plY3RUb0xvY2FsU3RvcmFnZSIsInByb2plY3QiLCJkaXNwbGF5VGFza3MiLCJ0YXNrTGlzdENvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRhc2tJbmRleCIsImZpbHRlciIsInZhbCIsImluY2x1ZGVzIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZGF0YXNldCIsImluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kIiwidGFza1RpdGxlQ29udGFpbmVyIiwidGFza0NoZWNrIiwidGV4dENvbnRlbnQiLCJ0YXNrVGl0bGUiLCJ0YXNrRGF0ZSIsInRhc2tEZWxldGUiLCJ0YXNrRWRpdCIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwic3RvcFByb3BhZ2F0aW9uIiwiY29uc29sZSIsImxvZyIsImNsb3Nlc3QiLCJyZXNldFRhc2tMaXN0IiwiY3VycmVudFByb2plY3RIZWFkZXIiLCJtYXAiLCJvYmplY3QiLCJpbmRleE9mIiwiaW5uZXJIVE1MIiwiZGlzcGxheVByb2plY3RzIiwicHJvamVjdExpc3RDb250YWluZXIiLCJwcm9qZWN0SW5kZXgiLCJwcm9qZWN0RGVsZXRlIiwicHJvamVjdE5hbWVUYXJnZXQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwidG9TdHJpbmciLCJyZW1vdmVUYXNrQnlQcm9qZWN0TmFtZSIsInByb2plY3ROYW1lIiwidGFza3MiLCJpIiwibGVuZ3RoIiwic3BsaWNlIiwicmVzZXRQcm9qZWN0TGlzdCIsInNpZGViYXIiLCJsaXN0Q29udGFpbmVyIiwic3R5bGUiLCJ3aWR0aCIsInpJbmRleCIsIm1hcmdpbkxlZnQiLCJnZXRJdGVtIiwicGFyc2UiLCJuZXdUYXNrQnRuIiwibmV3VGFza0NvbnRhaW5lciIsImFsZXJ0IiwiZGlzcGxheSIsImNvbmZpcm1UYXNrQnRuIiwiY2FuY2VsVGFza0J0biIsInZhbHVlIiwiYWRkVGFza3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXQiLCJnZW5lcmF0ZVRhc2siLCJuZXdQcm9qZWN0QnRuIiwibmV3UHJvamVjdENvbnRhaW5lciIsImNvbmZpcm1Qcm9qZWN0QnRuIiwiY2FuY2VsUHJvamVjdEJ0biIsImFkZFByb2plY3RzIiwicHVzaCIsImdlbmVyYXRlUHJvamVjdCJdLCJzb3VyY2VSb290IjoiIn0=